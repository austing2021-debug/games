<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>æ¯”å¤§å°æ’åˆ—</title>
    <style>
        body { margin: 0; background: #e3f2fd; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        header { padding: 10px; background: white; display: flex; gap: 5px; justify-content: center; flex-wrap: wrap;}
        button { padding: 5px 10px; border-radius: 10px; border: 1px solid #2196f3; background: white; cursor: pointer; }
        .selected { background: #2196f3; color: white; }
        
        #game { flex: 1; display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 20px; padding: 20px; }
        .bubble { width: 80px; height: 80px; border-radius: 50%; background: white; border: 4px solid #4caf50; display: flex; justify-content: center; align-items: center; font-size: 2rem; font-weight: bold; cursor: pointer; transition: transform 0.2s; box-shadow: 0 4px 0 #388e3c;}
        .bubble:active { transform: scale(0.9); }
        h2 { text-align: center; color: #1565c0; margin: 10px 0; }
    </style>
</head>
<body>
    <header>
        <a href="index.html" style="text-decoration:none; padding:5px;">â—€</a>
        <button id="bMax" class="selected" onclick="mode='max';init()">æ‰¾æœ€å¤§</button>
        <button id="bMin" onclick="mode='min';init()">æ‰¾æœ€å°</button>
        <button id="bSort" onclick="mode='sort';init()">å¾å°åˆ°å¤§é»æ“Š</button>
    </header>
    <h2 id="title">æ‰¾å‡ºæœ€å¤§çš„æ•¸å­—!</h2>
    <div id="game"></div>

    <script>
        let mode = 'max';
        let nums = [];
        let sortIndex = 0;

        window.onload = init;

        function init() {
            document.querySelectorAll('header button').forEach(b => b.classList.remove('selected'));
            if(mode==='max') document.getElementById('bMax').classList.add('selected');
            if(mode==='min') document.getElementById('bMin').classList.add('selected');
            if(mode==='sort') document.getElementById('bSort').classList.add('selected');

            const title = document.getElementById('title');
            if(mode === 'max') title.innerText = "æ‰¾å‡ºæœ€å¤§çš„æ•¸å­—!";
            else if(mode === 'min') title.innerText = "æ‰¾å‡ºæœ€å°çš„æ•¸å­—!";
            else title.innerText = "ä¾åºå¾å°åˆ°å¤§é»æ“Š!";

            const count = Math.floor(Math.random()*4) + 3; // 3-6å€‹
            nums = [];
            while(nums.length < count) {
                let r = Math.floor(Math.random()*50)+1;
                if(!nums.includes(r)) nums.push(r);
            }
            
            const game = document.getElementById('game');
            game.innerHTML = '';
            sortIndex = 0;

            nums.forEach(n => {
                const b = document.createElement('div');
                b.className = 'bubble';
                b.innerText = n;
                b.onclick = () => check(b, n);
                game.appendChild(b);
            });
        }

        function check(el, val) {
            let correct = false;
            if(mode === 'max') {
                if(val === Math.max(...nums)) correct = true;
            } else if (mode === 'min') {
                if(val === Math.min(...nums)) correct = true;
            } else {
                // Sort mode
                let sorted = [...nums].sort((a,b)=>a-b);
                if(val === sorted[sortIndex]) {
                    el.style.visibility = 'hidden'; // æ¶ˆå¤±
                    sortIndex++;
                    if(sortIndex === nums.length) correct = true;
                    else return; // ç¹¼çºŒé»ä¸‹ä¸€å€‹
                } else {
                    el.style.background = '#ffcdd2';
                    setTimeout(()=>el.style.background='white', 500);
                    return;
                }
            }

            if(correct) {
                setTimeout(() => {
                    alert("ç­”å°äº†! ğŸ‰");
                    init();
                }, 100);
            } else {
                el.style.background = '#ffcdd2';
                setTimeout(()=>el.style.background='white', 500);
            }
        }
    </script>
</body>
</html>
